{% assign mermaid_enabled = site.features.mermaid | default: false %}
{% assign math_enabled = site.features.math | default: false %}
{% assign asset_version = site.time | date: '%s' %}
{% if site.github and site.github.build_revision %}
  {% assign asset_version = site.github.build_revision %}
{% endif %}

{% if mermaid_enabled and page.layout == 'post' and page.mermaid %}
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
{% endif %}

{% if math_enabled and page.layout == 'post' and page.math %}
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']]
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    };
  </script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
{% endif %}

<script defer src="{{ '/assets/scripts.js' | relative_url }}?v={{ asset_version }}"></script>

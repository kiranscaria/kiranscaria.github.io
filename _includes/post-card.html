{% assign post_item = include.post %}
{% assign excerpt_words = include.excerpt_words | default: 24 %}
{% assign search_blob = post_item.title | append: ' ' | append: post_item.subtitle | append: ' ' | append: post_item.excerpt %}
<article
  class="post-card reveal"
  data-reveal
  data-search-item
  data-search-text="{{ search_blob | strip_html | normalize_whitespace | downcase | escape }}"
  data-search-categories="{% for category in post_item.categories %}{{ category | slugify }}{% unless forloop.last %}|{% endunless %}{% endfor %}"
>
  <a class="post-card-link" href="{{ post_item.url | relative_url }}">
    <div class="post-card-art"{% if post_item.background %} style="background-image: linear-gradient(140deg, rgba(11, 20, 34, 0.48), rgba(11, 20, 34, 0.18)), url('{{ post_item.background | relative_url }}');"{% endif %} aria-hidden="true">
      {% if post_item.categories and post_item.categories.size > 0 %}
        <span class="post-card-badge">{{ post_item.categories | first }}</span>
      {% endif %}
    </div>
    <div class="post-card-body">
      <p class="post-card-meta">
        <span class="post-card-date">{{ post_item.date | date: "%b %-d, %Y" }}</span>
        <span aria-hidden="true">â€¢</span>
        {% include read_time.html content=post_item.content %}
      </p>

      <h3 class="post-card-title">{{ post_item.title }}</h3>

      {% if post_item.subtitle %}
        <p class="post-card-subtitle">{{ post_item.subtitle }}</p>
      {% endif %}

      <p class="post-card-excerpt">{{ post_item.excerpt | strip_html | truncatewords: excerpt_words }}</p>

      {% if post_item.categories and post_item.categories.size > 0 %}
      <div class="post-tags" aria-label="Post categories">
        {% for category in post_item.categories limit: 3 %}
          <span class="pill">{{ category }}</span>
        {% endfor %}
      </div>
      {% endif %}
    </div>
  </a>
</article>
